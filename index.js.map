{"version":3,"file":"index.js","sources":["../src/js/constants.js","../src/js/products-api.js","../src/js/refs.js","../src/js/render-function.js","../src/js/helpers.js","../src/js/modal.js","../src/js/handlers.js","../src/home.js"],"sourcesContent":["export const BASE_URL = 'https://dummyjson.com';\nexport const API_ENDPOINTS = {\n  PRODUCTS: \"/products\",\n  PRODUCT_BY_ID: \"/products/\",\n  SEARCH_PRODUCTS: \"/products/search\",\n  CATEGORIES: \"/products/category-list\",\n  PRODUCTS_BY_CATEGORY:\"/products/category/\"\n  \n}\nexport const ITEMS_PER_PAGE = 12;\n\n","import axios from 'axios';\nimport { API_ENDPOINTS, BASE_URL, ITEMS_PER_PAGE } from './constants';\n\naxios.defaults.baseURL = BASE_URL;\nexport async function getProducts(page) {\n  const skip = (page - 1) * ITEMS_PER_PAGE;\n  const { data } = await axios.get(\n    `${API_ENDPOINTS.PRODUCTS}?limit=${ITEMS_PER_PAGE}&skip=${skip}`\n  );\n  return data;\n}\nexport async function getCategories() {\n  const {data} =  await axios.get(`${API_ENDPOINTS.CATEGORIES}`);\n  return data;\n}\nexport async function getProductById(id) {\n  const {data} =await axios.get(`${API_ENDPOINTS.PRODUCT_BY_ID}${id}`);\n  return data;\n}\nexport async function searchProducts(value) {\n  const { data } = await axios.get(\n    `${API_ENDPOINTS.SEARCH_PRODUCTS}?q=${value}`\n  );\n  return data;\n}\nexport async function getProductsByCategories(category) {\n  const { data } = await axios.get(\n    `${API_ENDPOINTS.PRODUCTS_BY_CATEGORY}${category}`\n  );\n  return data;\n}\nexport function getProductsByIds(ids) {\n  return Promise.all(ids.map(id => getProductById(id)));\n}","export const refs = {\n  categoriesList: document.querySelector('.categories'),\n    modalProduct: document.querySelector('.modal-product'),\n   productsList: document.querySelector('.products'), \n  modal: document.querySelector('.modal'),\n  modalCloseBtn: document.querySelector('.modal__close-btn'),\n};\n","import { refs } from './refs.js';\n\nexport function renderCategories(categories) {\n  const categoriesWithAll = ['All', ...categories];\n  const markup = categoriesWithAll\n    .map(\n      category => `\n      <li class=\"categories__item\">\n        <button class=\"categories__btn\" type=\"button\">${category}</button>\n      </li>\n    `\n    )\n    .join('');\n\n  refs.categoriesList.innerHTML = markup;\n}\n\n\nexport function renderModalProduct({thumbnail, title, tags, description, shippingInformation, returnPolicy, price, id}) {\n\n    const tagsMarkup = tags ? `<ul class=\"modal-product__tags\">${tags.map(tag => `<li class=\"modal-product__tag\">${tag}</li>`).join('')}</ul>` : '';\n    const markup = `<img class=\"modal-product__img\" src=\"${thumbnail}\" alt=\"${title}\" />\n            <div class=\"modal-product__content\">\n            <p class=\"modal-product__title\">${title}</p>\n            ${tagsMarkup}\n            <p class=\"modal-product__description\">${description}</p>\n            <p class=\"modal-product__shipping-information\">Shipping: ${shippingInformation}</p>\n            <p class=\"modal-product__return-policy\">Return Policy: ${returnPolicy}</p>\n            <p class=\"modal-product__price\">Price: ${price}$</p>\n            <button class=\"modal-product__buy-btn\" type=\"button\">Buy</button>\n            </div>`\n        \n\n    refs.modalProduct.innerHTML = markup;\n}\n\nexport function renderProducts(products) {\n  const markup = products.map(({id, title, thumbnail, category, price, brand}) => `\n    <li class=\"products__item\" data-id=\"${id}\">\n        <img class=\"products__image\" src=\"${thumbnail}\" alt=\"${title}\" />\n        <p class=\"products__title\">${title}</p>\n        <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand:</span> ${brand}</p>\n        <p class=\"products__category\">Category: ${category}</p>\n        <p class=\"products__price\">Price: $${price}</p>\n    </li>\n  `).join('');\n\n  refs.productsList.insertAdjacentHTML('beforeend', markup); \n}\n\n","export function toggleActiveClass(elements, activeEl, activeClass) {\n  elements.forEach(el => {\n    el.classList.remove(activeClass);\n  });\n  activeEl.classList.add(activeClass);\n}\n","import { refs } from './refs';\n\nexport function openModal() {\n  refs.modal.classList.add('modal--is-open');\n  document.body.style.overflow = 'hidden';\n  window.addEventListener('keydown', onEcsKeyPress);\n  refs.modal.addEventListener('click', onBackdropClick);\n  refs.modalCloseBtn.addEventListener('click', closeModal);\n}\n\nexport function closeModal() {\n  refs.modal.classList.remove('modal--is-open');\n  document.body.style.overflow = '';\n  window.removeEventListener('keydown', onEcsKeyPress);\n  refs.modal.removeEventListener('click', onBackdropClick);\n  refs.modalCloseBtn.removeEventListener('click', closeModal);\n}\n\nfunction onEcsKeyPress(e) {\n  if (e.key === 'Escape') {\n    closeModal();\n  }\n}\n\nfunction onBackdropClick(e) {\n  if (e.target === refs.modal) {\n    closeModal();\n  }\n}\n","import iziToast from 'izitoast';\nimport {\n  getCategories,\n  getProductById,\n  getProducts,\n  getProductsByCategories,\n} from './products-api';\nimport {\n  renderCategories,\n  renderModalProduct,\n  renderProducts,\n} from './render-function';\nimport { toggleActiveClass } from './helpers';\nimport { refs } from './refs';\nimport { openModal } from './modal';\n\nlet currentPage = 1;\nlet currentID;\n\nexport async function initHomePage() {\n  try {\n    const categories = await getCategories();\n    renderCategories(categories);\n    const { products, total } = await getProducts(currentPage);\n\n    if (!products?.length) {\n      //Notification no products\n      //div show 'not found'\n      return;\n    }\n\n    renderProducts(products);\n  } catch (err) {\n    console.error(`Error init page, ${err}`);\n  }\n}\n\nexport async function handleCategoryClick(e) {\n  if (e.target.nodeName !== 'BUTTON') return;\n\n  refs.productsList.innerHTML = '';\n\n  const category = e.target.textContent.toLowerCase();\n  const allButtons = document.querySelectorAll('.categories__btn');\n\n  toggleActiveClass(allButtons, e.target, 'categories__btn--active');\n\n  let productsData;\n  if (category === 'all') {\n    productsData = await getProducts();\n  } else {\n    productsData = await getProductsByCategories(category);\n  }\n\n  renderProducts(productsData.products);\n}\n\nexport async function handleProductClick(e) {\n  const productItem = e.target.closest('.products__item');\n\n  if (!productItem) return;\n  //   console.log(productItem);\n  try {\n    // console.log(e.target.dataset.id);\n\n    const productID = +productItem.dataset.id;\n    currentID = productID;\n    const product = await getProductById(productID);\n    renderModalProduct(product);\n    openModal();\n  } catch (err) {\n    console.log('Error: ', err);\n  }\n}\n","import {\n  handleCategoryClick,\n  handleProductClick,\n  initHomePage,\n} from './js/handlers';\nimport { refs } from './js/refs';\n\ndocument.addEventListener('DOMContentLoaded', initHomePage);\n\nrefs.categoriesList.addEventListener('click', handleCategoryClick);\n\nrefs.productsList.addEventListener('click', handleProductClick);\n"],"names":["BASE_URL","API_ENDPOINTS","ITEMS_PER_PAGE","axios","getProducts","page","skip","data","getCategories","getProductById","id","getProductsByCategories","category","refs","renderCategories","categories","markup","renderModalProduct","thumbnail","title","tags","description","shippingInformation","returnPolicy","price","tagsMarkup","tag","renderProducts","products","brand","toggleActiveClass","elements","activeEl","activeClass","el","openModal","onEcsKeyPress","onBackdropClick","closeModal","e","currentPage","currentID","initHomePage","total","err","handleCategoryClick","allButtons","productsData","handleProductClick","productItem","productID","product"],"mappings":"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"}